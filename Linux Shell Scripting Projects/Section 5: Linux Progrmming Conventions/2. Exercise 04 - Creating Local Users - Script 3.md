 # Exercise 04 - Creating Local Users - Script 3
 
 The scenario:
 
![image](https://user-images.githubusercontent.com/107522496/213671512-c6a11bf3-0b8e-4619-a262-874f943f6223.png)
![image](https://user-images.githubusercontent.com/107522496/213671551-2686033a-4d21-4dac-833f-676aef852275.png)

The Help Desk in our scenario has been using your script and they notice that there are some extra output that they don't need. It really doesn't make any sense to them. So they want you to make that output disappear.

We know that this output comes from the `passwd` command and that we're going to have to use IO redirection to redirect that output to the null device.

---

Let's look at just the couple of changes that we're going to make with this script.

* So we're going to change the name of the script from `add-new-local-user` to `add-newer-local-user`.
* We still want to make sure that the scriptis run with superuser privlieges, however, now, when displaying some help, or an error message when they don't run it with superuser privlieges, then what we want to do is send that output to standard error instead of standard output like we've been doing previously. And we will do this for all the error statuses that we're going to display in our script.

---

![image](https://user-images.githubusercontent.com/107522496/213677240-2b923e3b-9095-4877-bb79-877692494855.png)

Here, using `add-new-local-user.sh add-newer-local-user.sh`, I have copied the previous script we wrote and gave it the newer name. 

So, if I now go into the script using `vim add-newer-local-user.sh `, we will see: 

![image](https://user-images.githubusercontent.com/107522496/213677591-0d113668-593f-4bec-9599-e1df8031eac3.png)

The previous script is already there. 

--- 

![image](https://user-images.githubusercontent.com/107522496/213679015-29fb25d2-5377-429d-a0cf-688d38baa1b5.png)


```bash
#!/bin/bash
  2 
  3 # This script creates a new user on this local system.
  4 # You must supply a username as an argument to the script.
  5 # Optionally, you can also provide a comment for the account as an argument.
  6 # A password will be automatically generated for the account.
  7 # The username, password, and host for the account will be displayed. 
  8 
  9 # Making sure the script is being executed with superuser privileges.
 10 if [[ "${UID}" -ne 0 ]]
 11 then
 12         echo "Please run with sudo or as root."
 13         exit 1
 14 fi
 15 
 16 # If the user doesn't supply at least one argument, then give them help
 17 if [[ "${#}" -lt 1 ]]
 18 then
 19         echo "Usage: ${0} USER_NAME [COMMENT]..."
 20         echo "Create an account on the local system with the name of USER_NAME and a comments field of COMMENT." 
 21         exit 1
 22 fi
 23 
 24 # The first parameter is the username 
 25 USER_NAME="${1}"
 26 
 27 # The remaining parameters on the command line will be for the account comments.
 28 shift
 29 COMMENT="${@}"
 30 
 31 # Generate a password
 32 PASSWORD=$(date +%s%N | sha256sum | head -c8)
 33 
 34 # Create the user with the password
 35 useradd -c "${COMMENT}" -m ${USER_NAME}
 36 
 37 # Check if the useradd command succeeded
 38 # We don't want to tell the user that an account if it has not been created
 39 if [[ "${?}" -ne 0 ]]
 40 then
 41         echo "The account could not be created."
 42         exit 1
 43 fi
 44 
 45 # Setting the password
 46 echo ${PASSWORD} | passwd --stdin ${USER_NAME}
 47 
 48 # Check to see if the passwd command succeeded.
 49 if [[ "${?}" -ne 0 ]]
 50 then
 51         echo "The password for the account could not be set."
 52         exit 1
 53 fi
 54 
 55 # Force password change on first login
 56 passwd -e ${USER_NAME}
 57 
 58 # Display all the Information 
 59 echo
 60 echo 'username:'
 61 echo "${USER_NAME}"
 62 echo
 63 echo 'password:'
 64 echo "${PASSWORD}"
 65 echo
 66 echo 'host:'
 67 echo "${HOSTNAME}"
 68 exit 0
 69 
```

---

Now, start at the very top of the script and work your way down looking for any changes that we need to make.


























