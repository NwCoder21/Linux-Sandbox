# Solution - Off-Platform Project: Users & Permissions in Linux

In this article, you will practice some Linux system administration skills. You’ll make sure your coworkers James, Destiny, and Carolyn each have the intended levels of access to specific files.

Welcome to this off-platform project! You will follow along with the project in your Linux Ubuntu desktop (either in VirtualBox or native). Have your Linux terminal ready!

---

# Problem Statement

You are the system administrator of a small start-up. You need to manage access levels on a Linux computer. The following three users need to work with their specific files on the Linux computer:

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/80cd3557-dd2d-4977-bade-8b54dc88b1ca)

* James is a member of the Marketing team who need full access to all the Marketing files.
* Destiny is a member of the Sales team who need full access to all the Sales files.
* Carolyn is an administrator who needs read access to all files of all departments to monitor security and compliance.

---

# Environment Setup

Step 1:

Access your Linux environment, whether it is through VirtualBox or Linux running natively on your desktop. Login to your Linux environment as root or run the following command to escalate your access levels to the root: 

```
sudo -i
```

Solution:

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/fe506968-9e1b-49e9-bca6-518c7257f7b0)

Now I am root and at the root directory of the file system. 

---

Step 2: Start by creating the groups for the marketing team, sales team, and the information technology team. 

```bash
groupadd marketing-team -f
groupadd sales-team -f
groupadd it-team -f
```

Solution: 

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/3489dfd3-b859-475c-8780-8c3adf4f2648)

First created the marketing team. Then used `cat /etc/group' to ensure group has been created:

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/3a385b5a-3483-45b1-bff0-c363e9d38bbb)

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/d6e136b1-8ebf-4120-85a0-941996249a45)


> Note: thr `-f` option ensures group is created.

---

Step 3: Verify that the groups are created by listing all the available groups on your environment: 

```
cat /etc/group
```

The newly created group names must be appended at the end of the list.

Solution: 

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/117cc092-f604-44ee-9f13-5e2487776f3b)

Can now see all three have been created.

---

Step 4: Then create the users.


```
useradd james -g marketing-team -m
useradd destiny -g sales-team -m
useradd carolyn -g it-team -m
adduser carolyn sudo
```

The users are promptly added to their proper groups using the `-g` option. In other words, the `-g` option is used with `useradd` to esnure that user also gets addedd to a specfic group. In addition, a new `home` directory is created for each new user since the `-m` flag is enabled. 

Solution:

First just added James.:

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/4faeb303-9aa8-4a25-abd0-c1081d3dbf3a)

Then to check if he has been added, ran the `cat /etc/passwd` command:

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/75980644-3aa5-442d-855d-344f96c27411)

Can now see he has been added. 


Then added the rest:

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/ce28be14-54a3-43a8-bd8a-d9a9ed9ce215)

---

Also, because I want carolyn to have full access to the environment, we need rto add her to the `sudo` group too:

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/afbae302-4033-4885-bbac-766aae00c9d6)

---

Step 5: Observe the newly created home directories for the users:

```
ls /home/
```

Solution:

![image](https://github.com/NwCoder21/Linux-Sandbox/assets/107522496/2496ddbd-4d5b-4d87-9364-effc28430c7e)

---

Step 6: Verify that the users are added to their proper groups by listing the groups for each user using the following command:

```
groups [username]
```

For example:

```
groups james
```

---

Step 7: Next, create separate directories for each department. Download an archive of pre-created directories using wget. Alternatively, you can use curl to download the archive.

```
wget https://static-assets.codecademy.com/Courses/learn-linux/linux-shell-utilities/project-data.tar.gz
```

Or

```
curl https://static-assets.codecademy.com/Courses/learn-linux/linux-shell-utilities/project-data.tar.gz
```

---

Step 8: Then extract the archive to create the data directory and the sub-directories for the departments.

```
tar -xzvf project-data.tar.gz -C /tmp/
```

The command extracts the tar ball and creates the directory structure in the `/tmp` directory, which is a temporary directory in Linux where contents are automatically wiped out every 10 days. The temporary directory serves the purpose of this off-platform project, however, user data will be stored in more permanent directories such as `/home` in real world scenarios. 

---

Step 9: Verify the files and directories are created by visualizing the directory structure using the following command that relies on `sed`, a stream editor for filtering and transforming text:

```
find /tmp/data | sed -e "s/[^-][^\/]*\// |/g" -e "s/|\([^ ]\)/|-\1/"
```

Alternatively, you can use the `tree` utility if you have it installed on your operating system.

```
tree -d /tmp/data
```

The files structure looks like the following:

```
 |-data
 |     |-Sales
 |     |     |-file02
 |     |     |-file01
 |     |-IT
 |     |     |-file02
 |     |     |-file03
 |     |     |-file01
 |     |     |-file04
 |     |-Marketing
 |     |     |-file02
 |     |     |-file03
 |     |     |-file01
```

---

Step 10: Now we can modify the file permissions to reflect the requirements for each user and group. Starting with the Marketing department, set the owner of the `/tmp/data/Marketing`, the marketing group. 

```
chown :marketing-team /tmp/data/Marketing
```

---

Step 11: And repeat the same process for the other departments.

```
chown :sales-team /tmp/data/Sales
chown :it-team /tmp/data/IT
```

---

Step 12: Additionally, ensure that the permission levels are adjusted for each directory:

```
chmod -R 774 /tmp/data/Marketing
chmod -R 774 /tmp/data/Sales
chmod -R 774 /tmp/data/IT
```

---

Step 13: Now you should be able to verify the owner group for each directory if you list all directories in `/tmp/data`.

```
ls /tmp/data -l
```

---

# Access Verification

Step 14: Impersonate another user and verify their level of access. Let’s start with James.

```
su james
```

---

Step 15: Now you are logged in as James and should have access to the `Marketing` directory.

```
ls /tmp/data/Marketing
```

---

Step 16: Read the data in one of the files.

```
cat /tmp/data/Marketing/marketing_plan.txt
```

---

Step 17: Try to make some modifications in one of the `Marketing` files as James.

```
cat “new data” > /tmp/data/Marketing/marketing_plan.txt
```

---

Step 18: But what if James attempts to read or modify a file in the `Sales` directory?

ls /tmp/data/Sales

James’ access is restricted in the Sales directory. 

---

Step 19: Try logging into Destiny’s and see if she can access `/tmp/data/Marketing/social_media_strategy.txt`. 

Can Destiny see the content of `/tmp/data/Sales/contract_template.txt`?

---

# Conclusion

We have reviewed commands to add users, set file permissions, and match the users to their correct level of access. 
















